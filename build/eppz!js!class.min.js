/* eppz!js!class 0.2.2 */
function Class(){}Object.defineProperty(Object.prototype,"addProperties",{value:function(a){for(var b in a){var c=a[b];null!=c&&Object.defineProperty(this,b,{value:c})}}}),Object.defineProperty(Object.prototype,"addMethods",{value:function(a){this.addProperties(a)}}),Object.prototype.addMethods({getValueForKey:function(a){return this[a]},setValueForKey:function(a,b){this[b]=a},getValueForKeyPath:function(a){if(null==a)return null;if(0==a.contains("."))return this.getValueForKey(a);var b=a.split("."),c=b.shift(),d=b.join(".");return null==this[c]?null:this[c].getValueForKeyPath(d)},setValueForKeyPath:function(a,b){if(null!=b){if(0==b.contains("."))return void this.setValueForKey(a,b);var c=b.split("."),d=c.shift(),e=c.join(".");null!=this[d]&&this[d].setValueForKeyPath(a,e)}}}),Class.prototype.construct=function(){},Class.prototype.className="Class",Class.className="Class",Class.extend=function(instanceMethods,classMethods,propertyBindings){var _super=new Object;_super.className=this.className;for(var eachMethodName in this.prototype){var eachMethod=this.prototype[eachMethodName];eachMethod instanceof Function!=0&&(_super[eachMethodName]=function(){var a=arguments.callee.methodName,b=arguments.callee.superclassInstance,c=this.callingInstance;return b[a].apply(c,arguments)},_super[eachMethodName].methodName=eachMethodName,_super[eachMethodName].superclassInstance=this.prototype)}for(var eachMethodName in this){var eachMethod=this[eachMethodName];eachMethod instanceof Function!=0&&(_super[eachMethodName]=function(){var a=arguments.callee.methodName,b=arguments.callee.superclassInstance,c=this.callingInstance;return b[a].apply(c,arguments)},_super[eachMethodName].methodName=eachMethodName,_super[eachMethodName].superclassInstance=this)}var constructorFunction=function(){if("skip"!=arguments[0]){ClassTools.copyPropertiesOfObjectTo(instanceMethods,this),ClassTools.synthesizeEnumeratorsForObject(this),null!=propertyBindings&&ClassTools.synthesizeAccessorsWithPropertyBindingsMapForObject(this,instanceMethods,propertyBindings),Object.defineProperty(this,"super",{get:function(){var a=arguments.callee.caller._super;return a.callingInstance=this,a}}),this.construct.apply(this,arguments);for(var a in propertyBindings)this[a]=this[a]}},newClassName=null;if(null!=instanceMethods.className&&null==newClassName&&(newClassName=instanceMethods.className),null!=classMethods&&null!=classMethods.className&&null==newClassName&&(newClassName=classMethods.className),null==newClassName&&(newClassName="Class"),"Class"==newClassName)var Class=constructorFunction;else eval("var "+newClassName+" = "+constructorFunction.toString()),eval("var Class = "+newClassName+";");return Class.prototype.superclassName=this.className,Class.superclassName=this.className,Class.prototype.className=newClassName,Class.className=newClassName,Class.prototype=new this("skip"),ClassTools.copyMethodsOfObjectTo(instanceMethods,Class.prototype,_super),ClassTools.copyMethodsOfObjectTo(this,Class,_super),ClassTools.copyMethodsOfObjectTo(classMethods,Class,_super,"__super"),Object.defineProperty(Class,"super",{get:function(){var a=arguments.callee.caller.__super;return a.callingInstance=this,a}}),Class};var ClassTools={copyMethodsOfObjectTo:function(a,b,c,d){if(null!=a&&null!=b){null==d&&(d="_super");for(var e in a){var f=a[e];f instanceof Function!=0&&(b[e]=f,b[e][d]=c)}}},copyPropertiesOfObjectTo:function(a,b){if(null!=a&&null!=b)for(var c in a){var d=a[c];d instanceof Function||(b[c]=d)}},isArray:function(a){return a.constructor===Array},synthesizeEnumeratorsForObject:function(a){for(var b in a){var c=a[b];if(null!=c&&this.isArray(c)){var d="enumerate"+b.capitalize();a[d]=function(a){for(var b=arguments.callee._arrayPropertyName,c=arguments.callee._object,d=c[b],e=0;e<d.length;e++){var f=d[e];a.apply(c,[f,e])}},a[d]._object=a,a[d]._arrayPropertyName=b}}},synthesizeAccessorsWithPropertyBindingsMapForObject:function(a,b,c){for(var d in b){var e=b[d];if(null!=e&&!(e instanceof Function)){var f=null!=c[d];if(0!=f){var g="_"+d,h=c[d][0],i=c[d][1],j=function(){var a=arguments.callee._instanceVariableName;return this[a]};j._instanceVariableName=g;var k=function(a){var b=arguments.callee._instanceVariableName,c=arguments.callee._boundPropertyName,d=arguments.callee._boundPropertyFormat;this[b]=a;var e=d.replace("%",a);this.setValueForKeyPath(e,c)};k._instanceVariableName=g,k._boundPropertyName=h,k._boundPropertyFormat=i,a[g]=a[d],Object.defineProperty(a,d,{get:j,set:k})}}}}};